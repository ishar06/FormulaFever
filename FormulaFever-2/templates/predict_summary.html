{% extends 'layout.html' %}
{% block title %}AI Race Predictor - FormulaFever{% endblock %}

{% block content %}
<div class="container mt-5">
  <h2>🏎️ AI Race Predictor</h2>
  <form method="POST" class="mt-4">
    <div class="row g-3">
      <div class="col-md-4">
        <label class="form-label">Driver (e.g., VER, LEC, HAM)</label>
        <input type="text" name="driver" class="form-control" required>
      </div>
      <div class="col-md-4">
        <label class="form-label">Tyre Compound</label>
        <input type="text" name="tyre" class="form-control" placeholder="Soft, Medium, Hard" required>
      </div>
      <div class="col-md-4">
        <label class="form-label">Lap Number</label>
        <input type="number" name="lap" class="form-control" required>
      </div>
    </div>

    <div class="row g-3 mt-3">
      <div class="col-md-6">
        <label class="form-label">Air Temperature (°C)</label>
        <input type="number" name="air_temp" class="form-control" required>
      </div>
      <div class="col-md-6">
        <label class="form-label">Track Temperature (°C)</label>
        <input type="number" name="track_temp" class="form-control" required>
      </div>
    </div>

    <button type="submit" class="btn btn-danger mt-4">Generate AI Summary</button>
  </form>

  {% if result %}
  {% if result.error %}
  <div class="alert alert-danger mt-4">{{ result.error }}</div>
  {% else %}
  <div class="predicted-summary">
    <h4>Predicted Race Summary 🧠</h4>
    <p><strong>Driver:</strong> {{ result.driver }}</p>
    <p><strong>Tyre:</strong> {{ result.tyre }}</p>
    <p><strong>Lap:</strong> {{ result.lap_number }}</p>
    <p><strong>Predicted Lap Time:</strong> {{ result.predicted_lap_time }}</p>
    <p><strong>Winning Probability:</strong> {{ result.winning_probability }}</p>
    <p><strong>Recommendation:</strong> {{ result.recommendation }}</p>
    <p><strong>Conditions:</strong> {{ result.context }}</p>
  </div>
  {% endif %}
  {% endif %}
</div>
{% endblock %}
